<!-- Generated by SpecStory -->

# Type Definition for CompanyInfo Response (2025-03-26 19:07:07)

_**User**_

 Create a type def for the QueryResponse response below. Use the browser and network logs if you need reference.
---
{
    "CompanyInfo": [
        {
            "CompanyName": "Sandbox Company_US_1",
            "LegalName": "Sandbox Company_US_1",
            "CompanyAddr": {
                "Id": "1",
                "Line1": "123 Sierra Way",
                "City": "San Pablo",
                "CountrySubDivisionCode": "CA",
                "PostalCode": "87999",
                "Lat": "36.6788345",
                "Long": "-5.4464622"
            },
            "CustomerCommunicationAddr": {
                "Id": "1",
                "Line1": "123 Sierra Way",
                "City": "San Pablo",
                "CountrySubDivisionCode": "CA",
                "PostalCode": "87999",
                "Lat": "36.6788345",
                "Long": "-5.4464622"
            },
            "LegalAddr": {
                "Id": "1",
                "Line1": "123 Sierra Way",
                "City": "San Pablo",
                "CountrySubDivisionCode": "CA",
                "PostalCode": "87999",
                "Lat": "36.6788345",
                "Long": "-5.4464622"
            },
            "CustomerCommunicationEmailAddr": {
                "Address": "noreply@quickbooks.com"
            },
            "PrimaryPhone": {},
            "CompanyStartDate": "2025-03-24",
            "FiscalYearStartMonth": "January",
            "Country": "US",
            "Email": {
                "Address": "noreply@quickbooks.com"
            },
            "WebAddr": {},
            "SupportedLanguages": "en",
            "DefaultTimeZone": "America/Los_Angeles",
            "NameValue": [
                {
                    "Name": "NeoEnabled",
                    "Value": "true"
                },
                {
                    "Name": "NonTracking",
                    "Value": "false"
                },
                {
                    "Name": "IsQbdtMigrated",
                    "Value": "false"
                },
                {
                    "Name": "CompanyType",
                    "Value": "Other"
                },
                {
                    "Name": "SubscriptionStatus",
                    "Value": "SUBSCRIBED"
                },
                {
                    "Name": "OfferingSku",
                    "Value": "QuickBooks Online Plus"
                },
                {
                    "Name": "PayrollFeature",
                    "Value": "false"
                },
                {
                    "Name": "AccountantFeature",
                    "Value": "false"
                },
                {
                    "Name": "QBOIndustryType",
                    "Value": "Landscaping Services"
                },
                {
                    "Name": "ItemCategoriesFeature",
                    "Value": "true"
                },
                {
                    "Name": "AssignedTime",
                    "Value": "2025-03-24T16:23:53-07:00"
                }
            ],
            "domain": "QBO",
            "sparse": false,
            "Id": "1",
            "SyncToken": "7",
            "MetaData": {
                "CreateTime": "2025-03-24T15:23:53-07:00",
                "LastUpdatedTime": "2025-03-24T19:28:10-07:00"
            }
        }
    ],
    "maxResults": 1
}

---

_**Assistant**_

I'll create a comprehensive type definition for the CompanyInfo response based on the example provided.

---

```diff
  	LegalName?: string;
  	CompanyAddr?: {
+ 		Id?: string;
  		Line1?: string;
  		Line2?: string;
```

```diff
  		PostalCode?: string;
  		Country?: string;
+ 		Lat?: string;
+ 		Long?: string;
  	};
  	CustomerCommunicationAddr?: {
+ 		Id?: string;
  		Line1?: string;
  		Line2?: string;
```

```diff
  		PostalCode?: string;
  		Country?: string;
+ 		Lat?: string;
+ 		Long?: string;
+ 	};
+ 	CustomerCommunicationEmailAddr?: {
+ 		Address?: string;
  	};
  	LegalAddr?: {
+ 		Id?: string;
  		Line1?: string;
  		Line2?: string;
```

```diff
  		PostalCode?: string;
  		Country?: string;
+ 		Lat?: string;
+ 		Long?: string;
  	};
- 	PrimaryPhone?: { FreeFormNumber: string };
- 	CompanyEmail?: { Address: string };
- 	WebAddr?: { URI: string };
+ 	PrimaryPhone?: { FreeFormNumber?: string };
+ 	CompanyEmail?: { Address?: string };
+ 	WebAddr?: { URI?: string };
  	SupportedLanguages?: string;
  	Country?: string;
- 	Email?: { Address: string };
+ 	Email?: { Address?: string };
  	FiscalYearStartMonth?: string;
+ 	CompanyStartDate?: string;
+ 	DefaultTimeZone?: string;
+ 	NameValue?: Array<{
+ 		Name: string;
+ 		Value: string;
+ 	}>;
+ 	MetaData?: {
+ 		CreateTime?: string;
+ 		LastUpdatedTime?: string;
+ 	};
+ 	domain?: string;
+ 	sparse?: boolean;
+ };
+ 
+ /**
+  * Type definition for company info query response
+  */
+ export type CompanyInfoResponse = {
+ 	QueryResponse: {
+ 		CompanyInfo: CompanyInfo[];
+ 		maxResults: number;
+ 	};
  };
  
```

```diff
   */
  export async function getCompanyInfo() {
- 	return quickbooksRequest<{ QueryResponse: { CompanyInfo: CompanyInfo[] } }>(
+ 	return quickbooksRequest<CompanyInfoResponse>(
  		"query?query=select * from CompanyInfo",
  	);
```

---

I've updated the CompanyInfo type definition to accurately represent the response structure from the QuickBooks API. The updated definition includes:

1. Added `Id`, `Lat`, and `Long` fields to address objects
2. Added `CustomerCommunicationEmailAddr` object
3. Made address fields optional with `?` modifier
4. Added new fields from the response:
   - CompanyStartDate
   - DefaultTimeZone
   - NameValue array for company attributes/settings
   - MetaData with creation and update timestamps
   - domain and sparse fields

Additionally, I created a dedicated `CompanyInfoResponse` type that matches the exact structure returned by the API, including the `maxResults` field. This type is now used in the `getCompanyInfo()` function for better type safety.

---

_**User**_

Put all the type definitions in a separate file 

---

_**Assistant**_

I'll create a separate file for all the type definitions and update the api.ts file to import them.

---

<details>
            <summary>Listed directory src/lib/intuit â€¢ **4** results</summary>
        
| Name |
|-------|
| ðŸ“„ `api.ts` |
| ðŸ“„ `auth.ts` |
| ðŸ“„ `client.ts` |
| ðŸ“„ `encryption.ts` |

</details>

---

```diff
- 
+ /**
+  * Type definitions for QuickBooks API interactions
+  */
+ 
+ // Common interface for query parameters
+ export interface QueryParams {
+ 	limit?: number;
+ 	offset?: number;
+ 	asc?: string;
+ 	desc?: string;
+ 	[key: string]: string | number | boolean | undefined;
+ }
+ 
+ /**
+  * Company information type definition
+  */
+ export type CompanyInfo = {
+ 	Id?: string;
+ 	SyncToken?: string;
+ 	CompanyName: string;
+ 	LegalName?: string;
+ 	CompanyAddr?: {
+ 		Id?: string;
+ 		Line1?: string;
+ 		Line2?: string;
+ 		City?: string;
+ 		CountrySubDivisionCode?: string;
+ 		PostalCode?: string;
+ 		Country?: string;
+ 		Lat?: string;
+ 		Long?: string;
+ 	};
+ 	CustomerCommunicationAddr?: {
+ 		Id?: string;
+ 		Line1?: string;
+ 		Line2?: string;
+ 		City?: string;
+ 		CountrySubDivisionCode?: string;
+ 		PostalCode?: string;
+ 		Country?: string;
+ 		Lat?: string;
+ 		Long?: string;
+ 	};
+ 	CustomerCommunicationEmailAddr?: {
+ 		Address?: string;
+ 	};
+ 	LegalAddr?: {
+ 		Id?: string;
+ 		Line1?: string;
+ 		Line2?: string;
+ 		City?: string;
+ 		CountrySubDivisionCode?: string;
+ 		PostalCode?: string;
+ 		Country?: string;
+ 		Lat?: string;
+ 		Long?: string;
+ 	};
+ 	PrimaryPhone?: { FreeFormNumber?: string };
+ 	CompanyEmail?: { Address?: string };
+ 	WebAddr?: { URI?: string };
+ 	SupportedLanguages?: string;
+ 	Country?: string;
+ 	Email?: { Address?: string };
+ 	FiscalYearStartMonth?: string;
+ 	CompanyStartDate?: string;
+ 	DefaultTimeZone?: string;
+ 	NameValue?: Array<{
+ 		Name: string;
+ 		Value: string;
+ 	}>;
+ 	MetaData?: {
+ 		CreateTime?: string;
+ 		LastUpdatedTime?: string;
+ 	};
+ 	domain?: string;
+ 	sparse?: boolean;
+ };
+ 
+ /**
+  * Type definition for company info query response
+  */
+ export type CompanyInfoResponse = {
+ 	QueryResponse: {
+ 		CompanyInfo: CompanyInfo[];
+ 		maxResults: number;
+ 	};
+ };
+ 
+ /**
+  * Customer entity type definition
+  */
+ export type Customer = {
+ 	Id?: string;
+ 	SyncToken?: string;
+ 	DisplayName: string;
+ 	Title?: string;
+ 	GivenName?: string;
+ 	MiddleName?: string;
+ 	FamilyName?: string;
+ 	Suffix?: string;
+ 	CompanyName?: string;
+ 	Active?: boolean;
+ 	Notes?: string;
+ 	Balance?: number;
+ 	PrimaryEmailAddr?: { Address: string };
+ 	PrimaryPhone?: { FreeFormNumber: string };
+ 	Mobile?: { FreeFormNumber: string };
+ 	WebAddr?: { URI: string };
+ 	BillAddr?: {
+ 		Line1?: string;
+ 		Line2?: string;
+ 		Line3?: string;
+ 		City?: string;
+ 		CountrySubDivisionCode?: string;
+ 		PostalCode?: string;
+ 		Country?: string;
+ 	};
+ 	ShipAddr?: {
+ 		Line1?: string;
+ 		Line2?: string;
+ 		Line3?: string;
+ 		City?: string;
+ 		CountrySubDivisionCode?: string;
+ 		PostalCode?: string;
+ 		Country?: string;
+ 	};
+ 	Taxable?: boolean;
+ 	DefaultTaxCodeRef?: { value: string; name?: string };
+ 	PreferredDeliveryMethod?: string;
+ };
+ 
+ /**
+  * Vendor entity type definition
+  */
+ export type Vendor = {
+ 	Id?: string;
+ 	SyncToken?: string;
+ 	DisplayName: string;
+ 	Title?: string;
+ 	GivenName?: string;
+ 	MiddleName?: string;
+ 	FamilyName?: string;
+ 	Suffix?: string;
+ 	CompanyName?: string;
+ 	Active?: boolean;
+ 	Vendor1099?: boolean;
+ 	Balance?: number;
+ 	AcctNum?: string;
+ 	PrintOnCheckName?: string;
+ 	PrimaryEmailAddr?: { Address: string };
+ 	PrimaryPhone?: { FreeFormNumber: string };
+ 	Mobile?: { FreeFormNumber: string };
+ 	WebAddr?: { URI: string };
+ 	BillAddr?: {
+ 		Line1?: string;
+ 		Line2?: string;
+ 		Line3?: string;
+ 		City?: string;
+ 		CountrySubDivisionCode?: string;
+ 		PostalCode?: string;
+ 		Country?: string;
+ 	};
+ 	TermRef?: { value: string; name?: string };
+ 	TaxIdentifier?: string;
+ };
+ 
+ /**
+  * Purchase entity type definition
+  */
+ export type Purchase = {
+ 	Id?: string;
+ 	SyncToken?: string;
+ 	PaymentType: "Cash" | "Check" | "CreditCard";
+ 	AccountRef: { value: string; name?: string };
+ 	EntityRef?: { value: string; name?: string; type?: string };
+ 	Line: Array<{
+ 		Id?: string;
+ 		DetailType: "AccountBasedExpenseLineDetail" | "ItemBasedExpenseLineDetail";
+ 		Amount: number;
+ 		Description?: string;
+ 		AccountBasedExpenseLineDetail?: {
+ 			AccountRef: { value: string; name?: string };
+ 			TaxCodeRef?: { value: string };
+ 			BillableStatus?: string;
+ 			ClassRef?: { value: string; name?: string };
+ 		};
+ 		ItemBasedExpenseLineDetail?: {
+ 			ItemRef: { value: string; name?: string };
+ 			UnitPrice: number;
+ 			Qty: number;
+ 			TaxCodeRef?: { value: string };
+ 			BillableStatus?: string;
+ 			ClassRef?: { value: string; name?: string };
+ 		};
+ 	}>;
+ 	TxnDate?: string;
+ 	CurrencyRef?: { value: string; name?: string };
+ 	PrivateNote?: string;
+ 	DocNumber?: string;
+ 	TxnTaxDetail?: {
+ 		TotalTax: number;
+ 		TaxLine: Array<{
+ 			Amount: number;
+ 			DetailType: string;
+ 			TaxLineDetail: {
+ 				TaxRateRef: { value: string; name?: string };
+ 				PercentBased?: boolean;
+ 				TaxPercent?: number;
+ 				NetAmountTaxable?: number;
+ 				TaxInclusiveAmount?: number;
+ 			};
+ 		}>;
+ 	};
+ 	Credit?: boolean;
+ 	DepartmentRef?: { value: string; name?: string };
+ };
+ 
+ /**
+  * PurchaseOrder entity type definition
+  */
+ export type PurchaseOrder = {
+ 	Id?: string;
+ 	SyncToken?: string;
+ 	APAccountRef: { value: string; name?: string };
+ 	VendorRef: { value: string; name?: string };
+ 	Line: Array<{
+ 		Id?: string;
+ 		DetailType: "AccountBasedExpenseLineDetail" | "ItemBasedExpenseLineDetail";
+ 		Amount: number;
+ 		Description?: string;
+ 		ItemBasedExpenseLineDetail?: {
+ 			ItemRef: { value: string; name?: string };
+ 			UnitPrice: number;
+ 			Qty: number;
+ 			TaxCodeRef?: { value: string };
+ 			BillableStatus?: string;
+ 			ClassRef?: { value: string; name?: string };
+ 		};
+ 	}>;
+ 	POStatus?: "Open" | "Closed";
+ 	TxnDate?: string;
+ 	CurrencyRef?: { value: string; name?: string };
+ 	PrivateNote?: string;
+ 	Memo?: string;
+ 	DocNumber?: string;
+ 	ShipAddr?: {
+ 		Line1?: string;
+ 		Line2?: string;
+ 		Line3?: string;
+ 		City?: string;
+ 		CountrySubDivisionCode?: string;
+ 		PostalCode?: string;
+ 		Country?: string;
+ 	};
+ 	ShipMethodRef?: { value: string; name?: string };
+ 	EmailStatus?: "NotSet" | "NeedToSend" | "EmailSent";
+ 	POEmail?: { Address: string };
+ };
+ 
```

---

```diff
  import { refreshTokensIfNeeded } from "./auth";
+ import {
+ 	CompanyInfo,
+ 	type CompanyInfoResponse,
+ 	type Customer,
+ 	type Purchase,
+ 	type PurchaseOrder,
+ 	type QueryParams,
+ 	type Vendor,
+ } from "./types";
  
  // Check for required environment variables
```

```diff
  	return query;
  }
- 
- // Common interface for query parameters
- export interface QueryParams {
- 	limit?: number;
- 	offset?: number;
- 	asc?: string;
- 	desc?: string;
- 	[key: string]: string | number | boolean | undefined;
- }
- 
- /**
-  * Company information type definition
-  */
- export type CompanyInfo = {
- 	Id?: string;
- 	SyncToken?: string;
- 	CompanyName: string;
- 	LegalName?: string;
- 	CompanyAddr?: {
- 		Id?: string;
- 		Line1?: string;
- 		Line2?: string;
- 		City?: string;
- 		CountrySubDivisionCode?: string;
- 		PostalCode?: string;
- 		Country?: string;
- 		Lat?: string;
- 		Long?: string;
- 	};
- 	CustomerCommunicationAddr?: {
- 		Id?: string;
- 		Line1?: string;
- 		Line2?: string;
- 		City?: string;
- 		CountrySubDivisionCode?: string;
- 		PostalCode?: string;
- 		Country?: string;
- 		Lat?: string;
- 		Long?: string;
- 	};
- 	CustomerCommunicationEmailAddr?: {
- 		Address?: string;
- 	};
- 	LegalAddr?: {
- 		Id?: string;
- 		Line1?: string;
- 		Line2?: string;
- 		City?: string;
- 		CountrySubDivisionCode?: string;
- 		PostalCode?: string;
- 		Country?: string;
- 		Lat?: string;
- 		Long?: string;
- 	};
- 	PrimaryPhone?: { FreeFormNumber?: string };
- 	CompanyEmail?: { Address?: string };
- 	WebAddr?: { URI?: string };
- 	SupportedLanguages?: string;
- 	Country?: string;
- 	Email?: { Address?: string };
- 	FiscalYearStartMonth?: string;
- 	CompanyStartDate?: string;
- 	DefaultTimeZone?: string;
- 	NameValue?: Array<{
- 		Name: string;
- 		Value: string;
- 	}>;
- 	MetaData?: {
- 		CreateTime?: string;
- 		LastUpdatedTime?: string;
- 	};
- 	domain?: string;
- 	sparse?: boolean;
- };
- 
- /**
-  * Type definition for company info query response
-  */
- export type CompanyInfoResponse = {
- 	QueryResponse: {
- 		CompanyInfo: CompanyInfo[];
- 		maxResults: number;
- 	};
- };
  
  /**
```

```diff
  	);
  }
- 
- // Type definitions based on QuickBooks API
- 
- /**
-  * Customer entity type definition
-  */
- export type Customer = {
- 	Id?: string;
- 	SyncToken?: string;
- 	DisplayName: string;
- 	Title?: string;
- 	GivenName?: string;
- 	MiddleName?: string;
- 	FamilyName?: string;
- 	Suffix?: string;
- 	CompanyName?: string;
- 	Active?: boolean;
- 	Notes?: string;
- 	Balance?: number;
- 	PrimaryEmailAddr?: { Address: string };
- 	PrimaryPhone?: { FreeFormNumber: string };
- 	Mobile?: { FreeFormNumber: string };
- 	WebAddr?: { URI: string };
- 	BillAddr?: {
- 		Line1?: string;
- 		Line2?: string;
- 		Line3?: string;
- 		City?: string;
- 		CountrySubDivisionCode?: string;
- 		PostalCode?: string;
- 		Country?: string;
- 	};
- 	ShipAddr?: {
- 		Line1?: string;
- 		Line2?: string;
- 		Line3?: string;
- 		City?: string;
- 		CountrySubDivisionCode?: string;
- 		PostalCode?: string;
- 		Country?: string;
- 	};
- 	Taxable?: boolean;
- 	DefaultTaxCodeRef?: { value: string; name?: string };
- 	PreferredDeliveryMethod?: string;
- };
- 
- /**
-  * Vendor entity type definition
-  */
- export type Vendor = {
- 	Id?: string;
- 	SyncToken?: string;
- 	DisplayName: string;
- 	Title?: string;
- 	GivenName?: string;
- 	MiddleName?: string;
- 	FamilyName?: string;
- 	Suffix?: string;
- 	CompanyName?: string;
- 	Active?: boolean;
- 	Vendor1099?: boolean;
- 	Balance?: number;
- 	AcctNum?: string;
- 	PrintOnCheckName?: string;
- 	PrimaryEmailAddr?: { Address: string };
- 	PrimaryPhone?: { FreeFormNumber: string };
- 	Mobile?: { FreeFormNumber: string };
- 	WebAddr?: { URI: string };
- 	BillAddr?: {
- 		Line1?: string;
- 		Line2?: string;
- 		Line3?: string;
- 		City?: string;
- 		CountrySubDivisionCode?: string;
- 		PostalCode?: string;
- 		Country?: string;
- 	};
- 	TermRef?: { value: string; name?: string };
- 	TaxIdentifier?: string;
- };
- 
- /**
-  * Purchase entity type definition
-  */
- export type Purchase = {
- 	Id?: string;
- 	SyncToken?: string;
- 	PaymentType: "Cash" | "Check" | "CreditCard";
- 	AccountRef: { value: string; name?: string };
- 	EntityRef?: { value: string; name?: string; type?: string };
- 	Line: Array<{
- 		Id?: string;
- 		DetailType: "AccountBasedExpenseLineDetail" | "ItemBasedExpenseLineDetail";
- 		Amount: number;
- 		Description?: string;
- 		AccountBasedExpenseLineDetail?: {
- 			AccountRef: { value: string; name?: string };
- 			TaxCodeRef?: { value: string };
- 			BillableStatus?: string;
- 			ClassRef?: { value: string; name?: string };
- 		};
- 		ItemBasedExpenseLineDetail?: {
- 			ItemRef: { value: string; name?: string };
- 			UnitPrice: number;
- 			Qty: number;
- 			TaxCodeRef?: { value: string };
- 			BillableStatus?: string;
- 			ClassRef?: { value: string; name?: string };
- 		};
- 	}>;
- 	TxnDate?: string;
- 	CurrencyRef?: { value: string; name?: string };
- 	PrivateNote?: string;
- 	DocNumber?: string;
- 	TxnTaxDetail?: {
- 		TotalTax: number;
- 		TaxLine: Array<{
- 			Amount: number;
- 			DetailType: string;
- 			TaxLineDetail: {
- 				TaxRateRef: { value: string; name?: string };
- 				PercentBased?: boolean;
- 				TaxPercent?: number;
- 				NetAmountTaxable?: number;
- 				TaxInclusiveAmount?: number;
- 			};
- 		}>;
- 	};
- 	Credit?: boolean;
- 	DepartmentRef?: { value: string; name?: string };
- };
- 
- /**
-  * PurchaseOrder entity type definition
-  */
- export type PurchaseOrder = {
- 	Id?: string;
- 	SyncToken?: string;
- 	APAccountRef: { value: string; name?: string };
- 	VendorRef: { value: string; name?: string };
- 	Line: Array<{
- 		Id?: string;
- 		DetailType: "AccountBasedExpenseLineDetail" | "ItemBasedExpenseLineDetail";
- 		Amount: number;
- 		Description?: string;
- 		ItemBasedExpenseLineDetail?: {
- 			ItemRef: { value: string; name?: string };
- 			UnitPrice: number;
- 			Qty: number;
- 			TaxCodeRef?: { value: string };
- 			BillableStatus?: string;
- 			ClassRef?: { value: string; name?: string };
- 		};
- 	}>;
- 	POStatus?: "Open" | "Closed";
- 	TxnDate?: string;
- 	CurrencyRef?: { value: string; name?: string };
- 	PrivateNote?: string;
- 	Memo?: string;
- 	DocNumber?: string;
- 	ShipAddr?: {
- 		Line1?: string;
- 		Line2?: string;
- 		Line3?: string;
- 		City?: string;
- 		CountrySubDivisionCode?: string;
- 		PostalCode?: string;
- 		Country?: string;
- 	};
- 	ShipMethodRef?: { value: string; name?: string };
- 	EmailStatus?: "NotSet" | "NeedToSend" | "EmailSent";
- 	POEmail?: { Address: string };
- };
  
  // Customer CRUD operations
```

---

I've successfully moved all the type definitions to a separate file and updated the main API file:

1. Created a new file `src/lib/intuit/types.ts` with all type definitions:
   - QueryParams interface
   - CompanyInfo with updated fields
   - CompanyInfoResponse
   - Customer, Vendor, Purchase, and PurchaseOrder types

2. Updated `src/lib/intuit/api.ts` to:
   - Import all required types from the new types.ts file
   - Remove all duplicated type definitions
   - Keep the function implementations unchanged

This separation follows the best practice of keeping type definitions separate from implementation code, making the codebase more maintainable and organized. The functions in api.ts still have the same behavior but now reference the types from the external file.

---

